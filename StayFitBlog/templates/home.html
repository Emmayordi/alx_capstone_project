{% extends 'layout.html' %} {% block contents %}
<div class="posts-container" style="margin-top: 20px">
  {% for post in posts %}
  <div
    class="post-card"
    style="border: 1px solid #ddd; padding: 20px; margin-bottom: 30px"
  >
    <h2>{{ post.title }}</h2>
    <p>{{ post.content | truncate(100, True, '...') }}</p>
    <small
      >Posted by {{ post.author.name }} on {{
      post.date_posted.strftime('%Y-%m-%d %H:%M') }}</small
    >

    <!-- Previously existing buttons replaced with the new btn-group -->
    <div
      style="margin-top: 10px"
      class="btn-group"
      role="group"
      aria-label="Post actions"
    >
      <a
        href="{{ url_for('post_detail', post_id=post.id) }}"
        class="btn btn-secondary"
        style="margin-right: 5px"
        >View & Comment</a
      >
      {% if current_user.is_authenticated and current_user.id == post.author.id
      %}
      <a
        href="{{ url_for('edit_post', post_id=post.id) }}"
        class="btn btn-info"
        style="margin-right: 5px"
        >Edit</a
      >
      {% endif %}
      <!-- The Delete Account button typically wouldn't be placed here as it affects user account, not post actions -->
    </div>
  </div>
  {% endfor %}
</div>

{% if current_user.is_authenticated %}
<div style="margin-top: 20px">
  <a href="{{ url_for('add_post') }}" class="add-post-btn">Add Post</a>
  <!-- Delete Account button should be more appropriately placed outside of the posts loop, perhaps in a user profile section or settings page -->
  <a
    href="{{ url_for('delete_account') }}"
    class="btn btn-danger"
    onclick="return confirm('Are you sure you want to delete your account? This action cannot be undone.');"
    >Delete Account</a
  >
</div>
{% else %}
<div style="margin-top: 20px">
  <a
    href="{{ url_for('login', next=request.endpoint) }}"
    class="login-to-add-post-btn"
    >Login to Add Post</a
  >
</div>
{% endif %} {% endblock %}
